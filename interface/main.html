<html>
<head>
 <title>Collocations interface</title>
	<meta http-equiv="Content-Type" content="text/html; charset=windows-1251"> 
	<meta name="Author" content="Krylova Irina"> 
	<meta name="keywords" content="collocations,MI,t-score,mutual information">
	<meta name="description" content="Collocations">
	<meta name="Generator" content="Notepad++">
	<style type="text/css">

	   body, input, select { font-family: Verdana,Arial,sans-serif;  
	   font-size: 9pt; 
	   color: 8B0000; background-color: #E6E6FA;}
	   p {font-weight: bold;}
	   .required {color:red; display:none; font-weight: bold;}
	   #params {display: none;}
	   #bound {display: none;}
	   #journal {display: none;}
	   #freq {display: none;}
		.vvod{background-color: #FFF;}
	</style>

	<script type="text/javascript">
		function show(name){
			document.getElementById(name).style.display = 'block';
		}
		function hide(name){
			document.getElementById(name).style.display = 'none';
		}
		
		
		
		function checkedRadio(radioGroup){
  //возвращает значение выбранного элемента группы радиокнопок radioGroup  
			n = -1;
			for (i=0; i<radioGroup.length; i++){
				if (radioGroup[i].checked) {
					n = 1;
					return radioGroup[i].value;
				}
			}
			if (n<0) return null;
		}

		function checkedBoxes(checkGroup){
			var v = "";
			var p = 1;
			for (i=0;i<checkGroup.length;i++){
				if (checkGroup[i].checked){
					p++;
					if (p>2){ v += ", ";}
					v += checkGroup[i].value;	
				}
			}
			return v;
		}	
		
		function process(){
			var s = '';
			with(document.f){
				if (checkedRadio(metric) == null){
					document.getElementById('metr').style.display = 'inline';
					return ;
				}
				else {document.getElementById('metr').style.display = 'none'; }
				if (collection.options[collection.selectedIndex].value == "q"){
					document.getElementById('collec').style.display = 'inline';
					return ;
				}
				else {document.getElementById('collec').style.display = 'none'; }
				
				s += "На коллекции "+ collection.options[collection.selectedIndex].value +" будет запущена метрика \"" + checkedRadio(metric) + "\" с параметрами: \n "; 
				s += checkedRadio(freqs)+" частоты; ";
				if (ipm.checked) s += "посчитать " + ipm.value + "; ";
				s += "по " + checkedRadio(param1) + ". "; //word, lemma
				
				if (checkedRadio(metric) == "MI" || checkedRadio(metric) == "Частотный словарь"){
					if (checkedBoxes(grams) == "" && gram.value == ""){
						document.getElementById('gram').style.display = 'inline';
						return ;
					}
					else {document.getElementById('gram').style.display = 'none'; 
					
					s += "Для ";
					if (checkedBoxes(grams) != "") {s += checkedBoxes(grams);} //ngramms
					if (checkedBoxes(grams) != "" && gram.value != ""){s += " и ";}
					if (gram.value != ""){s += gram.value +"грамм";}
					s += ". ";
					}
				}
				
				//если введено
				if(top.value != "") {
					s += "Записать " + top.value + " топ-слов. ";
				}
				
				
				//порог отсечения
				if(b.value != 2) {
					s += "Использовать порог отсечения по частоте = " + b.value + ".";
				}
				
				//если есть, то такие, иначе не введены
				if (checkedBoxes(dop) != "") {
					s += "\nДополнительные параметры: \n" + checkedBoxes(dop) + ".";
				}
				else {s += "\nДополнительные параметры: не выбраны."}
				if(resFileName.value != "") {
					s += "Результирующий файл: " + resFileName.value + ".";
				}
				else{document.getElementById('fileName').style.display = 'inline';}	
				journal.style.display = 'block';
				//location.hash = 'end';
				journal.value = s;
				
				
			}
		}
	</script>
</head>

<body>
	<h1>Collocations</h1>
	<form name="f" method = "get">
	<div id="metrics" > <!--div для метрик -->
		<p>Выберите метрику: <span class="required" id="metr">Вы не выбрали метрику!</span></p>
		<label>Для извлечения единиц анализа:</label><br><br>
		<label><input type="radio" name="metric" value="Частотный словарь" onclick="show('params'), hide('bound'), show('freq')">Частотный словарь  </label>
		<label><input type="radio" name="metric" value="MI" onclick="show('params'), show('bound'), hide('freq')">MI  </label>
		<label><input type="radio" name="metric" value="T-score" onclick="hide('params'),hide('bound'), hide('freq')">T-score  </label>
		<label><input type="radio" name="metric" value="Dice" onclick="hide('params'),hide('bound'), hide('freq')">Dice  </label>
		<label><input type="radio" name="metric" value="LL" onclick="hide('params'),hide('bound'), hide('freq')">LogLikelihood  </label><br><br><br>
		<label>Для взвешивания единиц анализа:</label><br><br>
		<label><input type="radio" name="metric" value="Tf-idf" onclick="hide('params'), hide('bound'), hide('freq')">Tf-idf  </label>
		<label><input type="radio" name="metric" value="Wierdness" onclick="hide('params'), hide('bound'), hide('freq')">Wierdness  </label>
		<label><input type="radio" name="metric" value="локальная/глобальная частота" onclick="hide('params'), hide('bound'), hide('freq')">локальная/глобальная частота</label><br><br><br>
	</div>
	<div id="freq">
	<p>Частоты:</p>
	<label><input type="radio" name="freqs" value="абсолютные" checked>абсолютные</label>
	<label><input type="radio" name="freqs" value="относительные">относительные</label>
	<label><input type="checkbox" name="ipm" value="ipm">ipm</label><br><br>	
	</div>
	<p>Считать метрику по:</p>
	<label><input type="radio" name="param1" value="леммам" checked>леммам</label>
	<label><input type="radio" name="param1" value="словоформам">словоформам</label><br><br>
	<div id="params" >
		<p>Считать метрику для: <span id="gram" class="required">Выберите для чего считать метрику.</span></p>
		<label><input type="checkbox" name="grams" value="однословных" checked>однословных</label><br>
		<label><input type="checkbox" name="grams" value="биграмм">биграмм</label><br>
		<label><input type="checkbox" name="grams" value="триграмм">триграмм</label><br>
		<label><input type="checkbox" name="grams" value="четырёхсловных">четырёхсловных</label><br>
		<label><input type="checkbox" name="grams" value="пятисловных">пятисловных</label><br>	
		<label>Другое: <input type="text" class="vvod" name="gram" value="" size="10"></label><br>	
	</div>
	<p>Дополнительные параметры:</p>
	<label><input type="checkbox" name="dop" value="Исключить пунктуацию">Исключить пунктуацию</label><br>
	<label><input type="checkbox" name="dop" value="Перевести в нижний регистр">Перевести в нижний регистр</label><br>
	<label><input type="checkbox" name="dop" value="Исключить цифры">Исключить цифры</label><br>
	<label><input type="checkbox" name="dop" value="Исключить латиницу">Исключить латиницу</label><br><br>
	<label>Записать только топ <input type="text" class="vvod" name="top" value="1000"> слов</label><br><br>
	<!--выводить только для MI-->
	<div id="bound">
		<label style="font-weight:bold;">Порог отсечения частот: <input type="text" name="b" class="vvod" value="2"></label><br><br>		
	</div>
	<div id="collections">
		<select name="collection" size="1" class="vvod">
		<option value="q">выберите коллекцию</option>
		<option value="Лента">Лента</option>
		<option value="Корпусная">Корпусная</option>
		<option value="Диалог">Диалог</option>
    </select> <span id="collec" class="required">Выберите коллекцию</span><br><br>	
	</div>
	<label>Введите имя результирующего файла: <input type="text" class="vvod" name="resFileName" value=""></label><span id="fileName" class="required">Имя файлу будет присвоено автоматически</span><br><br>
	<input type="button" name="start" value="Обработать" onClick="process()"><!--по клику должен показываться нижний див и запускаться обработка коллекции--><br><br>
	
	
	
	<!--<a name="end"></a>-->
	<p><textarea id="journal" name="journal" cols="80" rows="15" readonly style="display:none; border:tomato solid 1px; padding: 10px">
       </textarea></p>
	</form>	
	<div id="bottom">
		Все <a href="http://code.google.com/p/collocations/source/browse/#svn%2Ftrunk" title="Программы, SVN">программы</a> и <a href="http://code.google.com/p/collocations/wiki/Documentation" title="Wiki документация">документация к ним</a> находятся в открытом доступе.
		<p>&copy;Крылова Ирина</p>
	</div>
</body>
</html>